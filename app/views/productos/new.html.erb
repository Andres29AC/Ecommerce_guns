<h2>Agregar Productos</h2>

<%# Creando formulario para agregar productos %>

<%= form_with model: @producto do |form|%>
   <%# mostrando errores a los usuarioss en caso no se guarde un producto %>
   <% @producto.errors.full_messages.each do |error| %>
      <div>
         <%= error %> 
      </div> 
   <% end %>
   <div>
      <%=form.label :titulo %>
      <%=form.text_field :titulo %>
   </div>

   <div>
      <%=form.label :descripcion %>
      <%=form.text_area :descripcion %>
   </div>

   <div>
      <%=form.label :precio %>
      <%=form.number_field :precio %>
   </div>
   
   <%# <%=form.submit :id => 'saveButton'%>
   <%=form.submit%>
<% end %>

<script>
  document.querySelector("form").addEventListener("submit", function(event){
    event.preventDefault();
    Swal.fire({
      title: '¿Desea guardar el producto?',
      text: "¡Asegúrese de llenar todos los campos!",
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
      confirmButtonText: 'Sí, guardar',
      cancelButtonText: 'Cancelar'
    }).then((result) => {
      if (result.value) {
        this.submit()
        Swal.fire({
          position: 'top-end',
          icon: 'success',
          title: 'Producto guardado con éxito',
          showConfirmButton: false,
          timer: 1500
        });
      }
    })
  });
</script>



